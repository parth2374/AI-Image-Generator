<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AI Image Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">AI Image Generator</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">About Us</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Choose Image
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Generate Superman Images</a></li>
                  <li><a class="dropdown-item" href="#">Generate Sunglasses Images</a></li>
                </ul>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
    </nav>

    <div class="container">
      <form>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Enter your prompt to generate image</label>
          <input id="imgprompt" type="text" class="form-control" aria-describedby="emailHelp">
          <div class="form-text">Image will be fetched from OpenAI</div>
        </div>
        <button id="submitbtn" type="submit" class="btn btn-primary">Submit</button>
      </form>

      <div class="container my-4">
        <div class="svgContainer d-flex">
        <svg class="d-none" id="loadingGif" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="200" height="200" style="shape-rendering: auto; background: rgb(255, 255, 255);"><g data-idx="1"><g transform="matrix(1,0,0,1,0,0)" data-idx="2">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="3" opacity="0.523337">
            
          </rect>
        </g><g transform="matrix(0.8660254037844387,0.49999999999999994,-0.49999999999999994,0.8660254037844387,31.698729810778058,-18.30127018922194)" data-idx="5">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="6" opacity="0.60667">
            
          </rect>
        </g><g transform="matrix(0.5000000000000001,0.8660254037844386,-0.8660254037844386,0.5000000000000001,68.30127018922192,-18.30127018922194)" data-idx="8">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="9" opacity="0.690003">
            
          </rect>
        </g><g transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,100,0)" data-idx="11">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="12" opacity="0.773337">
            
          </rect>
        </g><g transform="matrix(-0.4999999999999998,0.8660254037844387,-0.8660254037844387,-0.4999999999999998,118.30127018922192,31.69872981077805)" data-idx="14">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="15" opacity="0.85667">
            
          </rect>
        </g><g transform="matrix(-0.8660254037844387,0.49999999999999994,-0.49999999999999994,-0.8660254037844387,118.30127018922194,68.30127018922194)" data-idx="17">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="18" opacity="0.940003">
            
          </rect>
        </g><g transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,100,100)" data-idx="20">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="21" opacity="0.023337">
            
          </rect>
        </g><g transform="matrix(-0.8660254037844386,-0.5000000000000001,0.5000000000000001,-0.8660254037844386,68.30127018922192,118.30127018922194)" data-idx="23">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="24" opacity="0.10667">
            
          </rect>
        </g><g transform="matrix(-0.5000000000000004,-0.8660254037844384,0.8660254037844384,-0.5000000000000004,31.698729810778104,118.30127018922194)" data-idx="26">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="27" opacity="0.190003">
            
          </rect>
        </g><g transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,7.105427357601002e-15,100)" data-idx="29">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="30" opacity="0.273337">
            
          </rect>
        </g><g transform="matrix(0.5000000000000001,-0.8660254037844386,0.8660254037844386,0.5000000000000001,-18.30127018922194,68.30127018922192)" data-idx="32">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="33" opacity="0.35667">
            
          </rect>
        </g><g transform="matrix(0.8660254037844384,-0.5000000000000004,0.5000000000000004,0.8660254037844384,-18.30127018922194,31.698729810778104)" data-idx="35">
          <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#000000" data-idx="36" opacity="0.440003">
            
          </rect>
        </g><g data-idx="38"></g></g><text data-watermark="true" text-anchor="middle" dominant-baseline="middle" stroke-opacity="0.1" fill="black" fill-opacity="0.1" stroke="white" stroke-width="1" font-size="5.0" x="50" y="50" data-idx="39" style="opacity: 1; font-size: 5px;">LOADING.IO</text></svg></div>
        <div class="row imageCont">
          
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
      submitbtn.addEventListener("click", (e) => {
        loadingGif.classList.toggle("d-none")
        e.preventDefault();
        const promptTxt = imgprompt.value;
        fetch("/generateimages" + promptTxt)
        .then(response => response.json())
        .then(data => {
          loadingGif.classList.toggle("d-none")
          console.log(data);
          const images = data.data;
          const container = document.querySelector(".imageCont");
          let totalHtml = "";

          images.forEach(image => {
            let html = `<div class="col-md-4 my-2">
              <img width="340" src="${image.url}" class="img-responsive">
            </div>`; 
            totalHtml += html;
          });
          container.innerHTML = totalHtml;
        });
      })
    </script>
  </body>
</html>